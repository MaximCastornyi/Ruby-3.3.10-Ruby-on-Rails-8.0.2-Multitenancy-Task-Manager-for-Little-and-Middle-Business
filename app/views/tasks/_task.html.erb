<div class="w-full">
  <table class="bg-[#1c255c] rounded-md w-full text-gray-300 mt-4">
    <thead>
      <tr class="text-left uppercase border-b border-gray-500">
        <th class="px-4 py-3">
          Complete
        </th>
        <th class="px-4 py-3">
          Completed in
        </th>
        <th class="px-16 py-3">
          Assigned in
        </th>
        <th class="px-16 py-3">
          <%= sort_link(@q, :name) %>
        </th>
        <th class="px-4 py-3">
          Priority
        </th>
        <th class="px-4 py-3">
          <%= sort_link(@q, :due_date, "Due in") %>
        </th>
      </tr>
    </thead>
    <tbody>
      <% @tasks.each do |task| %>
      <%# <% @project.tasks.order(completed_at: :desc).each do |task| %>
        <tr class="text-xl text-left capitalize hover:bg-[#5f0a63] rounded-md capitalize <%= "line-through text-orange-600" if task.completed? %> ">
          <td class="px-4 py-3">
            <%= form_with model: [@project, task] do |form| %>
              <%= form.check_box :completed, onchange: "this.form.requestSubmit()", class: " cursor-pointer" %>
            <% end %>
          </td>
          <td class="px-3 py-3"><%= task.completed? ? "#{time_ago_in_words(task.completed_at)} ago": "Incomplete" %> </td>
          <td class="px-3 py-3"><div class="ml-10"><%= task.assignee&.email %></div></td>
          <td class="px-3 py-3"><div class="ml-10"><%= task.name %></div></td>
          <td class="px-3 py-3"><div class="mr-20 grid justify-items-center"><%= task_priority(task.priority) %></div></td>
          <td class="px-3 py-3"><%= task.expired? ? "Expired" :distance_of_time_in_words(Time.current, task.due_date) %></td>
          <td class="py-3 ml-8">
            <%= link_to edit_project_task_path(@project, task), data: {turbo: true, turbo_frame: :modal} do %>
              <div class=" justify-items-center grid mr-10 ml-10">
                <%= inline_svg_tag("edit.svg") %>edit
              </div>
            <% end %>
          </td>
          <td class="py-3">
            <div class=" justify-items-center grid mr-5">
              <%= button_to project_task_path(@project, task), class: " justify-items-center grid cursor-pointer", method: :delete, data:{turbo_confirm:("Are You Shure?")} do %>
                <%= inline_svg_tag("delete.svg") %>
                Delete
              <% end %>
            </div>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
    <div class="p-4">
      <%== pagy_nav(@pagy) %>
    </div>
</div>